# 响应式系统与React

## 1. React的历史与应用

2010年，FaceBook首次引入了组件式组件的思想，启发了后来React的设计

2011年，Jordan Walke创造了FaxJS，后来的React的原型

2012年，Jordan Walke基于FaxJS的经验，创造了React

2013年，React正式开源

Jordan Walke: React A JavaScript library for building user interfaces.

2014年-今天，生态大爆发，各种围绕react的新工具/新框架开始涌现



## 2. React的设计思路

### UI编程痛点

原生编写

1. 手动调用DOM
2. 缺少封装和隔离，比较混乱
3. 数据依赖关系需要手动维护，依赖链路长，则会遇到回调地狱

## 转换式系统

约定 【输入】求解 【输出】

编译器     数值计算

## 响应式系统

监听事件，消息驱动

监控系统    UI界面

事件 执行既定的回调。状态变更 UI更新

## 响应式编程

1. 状态更新
2. 前端代码组件化，可复用，可封装
3. 状态之间的互相依赖关系，只需声明即可

## 组件化

1. 组件是 组件的组合/原子组件
2. 组件内拥有状态，外部不可见
3. 父组件可将状态传入组件内部



1. 组件声明了状态和UI的映射
2. 组件有Props/State的两种状态
3. 组件可由其他组件拼装而成

## 状态归属问题

状态具有局部性质

状态归属于两个节点向上寻找到最近的祖宗节点



思考：

1. 单向数据流
2. 状态管理库
3. React DOM更新的算法

## VDOM

用于真实DOM同步，在JS内存中维护的一个对象，VDOM具有和DOM类似的树状结构，并且和DOM可以建立一一对应的关系





指令式，告诉怎么做

声明式，发出指令自动做

响应式，声明式的一个类



父组件的改动，所有子组件都会重新render，react的性能问题



### DIFF

我们希望更新次数少，速度快

不同类型 替换

同类型的DOM元素 更新

同类型的组件元素 递归