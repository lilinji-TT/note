# 性能优化之延迟加载篇

### html5引入了两个属性async和defer，用于控制js脚本的加载和执行

##### ps：两者都和HTML解析同步执行，只是执行时机不同

- #### **async**：脚本将在下载完成以后立即异步执行，脚本的加载和页面的解析不会阻塞，脚本会在就绪时执行，适用于不依赖其他脚本或DOM内容的脚本

- #### **defer**：脚本将在HTML解析完成后执行，如有多个，按照定义顺序执行，适用于需要等待文档解析完成后执行的脚本

### Other

- #### 动态创建script标签，更加精确的控制脚本的加载

- #### 使用DOMContentLoaded事件，这个事件在整个HTML文档被完全加载和解析后触发，所以可以将脚本写在其中，确保文档已准备就绪

- #### preload:

  - 使用<link rel="preload">声明预加载资源
  - 必须指定as属性,声明资源类型,比如as="script"
  - 浏览器会以高优先级获取资源,并平行下载
  - 适用于页面必定需要的关键资源预加载

- #### prefetch：

  - 使用<link rel="prefetch">声明预取资源

  - 浏览器会在空闲时提前获取资源
  - 获取的资源会被缓存,以备后续使用
  - 适用于可能需要的非必要资源预取
  - 可提高后续页面性能,但要平衡数据消耗
